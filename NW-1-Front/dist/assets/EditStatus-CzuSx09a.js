import{_ as x,a as w,b as _,m as k,c as S,r as p,o as N,q as I,d as C,e as $,f as t,i as M,w as g,v as h,G as j,s as B,x as L,j as T,y as q,p as E,l as V}from"./index-BkCgF55l.js";const r=i=>(E("data-v-56d0ab36"),i=i(),V(),i),R={class:"itbkk-modal-status bg-gray-900 bg-opacity-70 overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full inset-0 max-h-full"},U={class:"relative p-4 w-full max-w-xl max-h-full"},z={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},A={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"},D=r(()=>t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Edit Status ",-1)),F=r(()=>t("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)),G=[F],O={class:"p-4 pb-0 md:p-5 md:pb-0"},W={class:"grid gap-4 mb-4 grid-cols-2"},H={class:"itbkk-status-name col-span-2"},J=r(()=>t("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Name",-1)),K={class:"itbkk-status-description col-span-2"},P=r(()=>t("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Description",-1)),Q={class:"flex justify-end gap-2 pb-2 mr-[20px]"},X=["disabled"],Y=r(()=>t("button",{class:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded w-24"}," Cancel ",-1)),Z={__name:"EditStatus",setup(i){const o=w(),c=_(),b=c.getStatuses(),f=k(),l=S(),s=p({id:"",name:"",description:""}),u=p({id:"",name:"",description:""}),v=async a=>{try{const e=await T(`/nw1/api//v2/statuses/${a}`);s.value=e,u.value={...e}}catch(e){console.error(`Failed to fetch status with ID ${a}:`,e)}};N(()=>{const a=f.params.id;v(a)});const y=async()=>{try{if(!!b.value.some(d=>d.name===s.value.name&&d.id!==s.value.id)){o.setNotificationMessage("Status name must be unique, please choose another name."),o.setNotificationType("error"),o.setShowNotification(!0);return}const e=await q(`/nw1/api//v2/statuses/${s.value.id}`,s.value);c.editStatus(e),o.setNotificationMessage(`The status "${s.value.name}" has been updated`),o.setNotificationType("success"),o.setShowNotification(!0),s.value={id:"",name:"",description:""},l.push({name:"StatusList"})}catch(a){o.setNotificationMessage(`An error occurred, the status "${s.value.name}" could not be updated.`),o.setNotificationType("error"),o.setShowNotification(!0),console.error("Error saving status:",a),l.push({name:"StatusList"})}},m=()=>{var a,e;return s.value.name.trim()!==u.value.name.trim()||((a=s.value.description)==null?void 0:a.trim())!==((e=u.value.description)==null?void 0:e.trim())};return(a,e)=>{const d=I("RouterLink");return C(),$("div",R,[t("div",U,[t("div",z,[t("div",A,[D,t("button",{onClick:e[0]||(e[0]=n=>M(l).push({name:"StatusList"})),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-toggle":"crud-modal"},G)]),t("form",O,[t("div",W,[t("div",H,[J,g(t("input",{type:"text",id:"name","onUpdate:modelValue":e[1]||(e[1]=n=>s.value.name=n),maxlength:"50",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Type status name",required:""},null,512),[[h,s.value.name,void 0,{trim:!0}]])]),t("div",K,[P,g(t("textarea",{id:"description",rows:"4","onUpdate:modelValue":e[2]||(e[2]=n=>s.value.description=n),maxlength:"200",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 resize-none",placeholder:"Write status description here"},null,512),[[h,s.value.description,void 0,{trim:!0}]])])])]),t("div",Q,[t("button",{onClick:y,disabled:!m(),class:j([{"cursor-not-allowed opacity-50":!m()},"bg-[#4CAF50] hover:bg-[#43A047] text-white py-2 px-4 rounded-lg w-24 shadow"])}," Save ",10,X),B(d,{to:{name:"StatusList"}},{default:L(()=>[Y]),_:1})])])])])}}},et=x(Z,[["__scopeId","data-v-56d0ab36"]]);export{et as default};
