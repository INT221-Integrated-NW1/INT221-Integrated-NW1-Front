import{_ as I,a as N,u as U,b as V,m as C,c as L,r as k,o as A,n as _,q as M,d,e as r,f as t,w as l,v as u,g as z,F as E,h as R,i as h,t as p,s as Z,x as j,j as w,y as q,p as G,l as P}from"./index-qv3pPW-M.js";const i=m=>(G("data-v-91a3fe06"),m=m(),P(),m),H={class:"fixed inset-0 bg-gray-900 bg-opacity-70 flex justify-center items-center text-white z-50"},J={class:"bg-[#222222] p-4 rounded-md w-[53em] max-h-[35em] border-[6px] border-[#37373D]"},K={class:"flex flex-col items-center text-xl"},Q={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},W={class:"w-96"},X=i(()=>t("label",{for:"title",class:"block pb-1"},"Title",-1)),Y={class:"w-96"},ee=i(()=>t("label",{for:"assignees",class:"block"},"Assignees",-1)),te={class:"w-96"},se=i(()=>t("label",{for:"status",class:"block"},"Status",-1)),oe=i(()=>t("option",{value:"",disabled:"",selected:""},"Select Status",-1)),ae=["value"],ie={class:"w-96"},de=i(()=>t("label",{for:"timezone",class:"block"},"TimeZone",-1)),re={id:"timezone",disabled:"",class:"itbkk-timezone p-2 mt-1 text-[#BFF1FF] focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},ne={class:"w-96 text-center"},le=i(()=>t("label",{for:"createdOn",class:"block"},"Created On",-1)),ce={id:"createdOn",rows:"1",disabled:"",class:"itbkk-created-on text-center p-2 mt-1 text-[#BFF1FF] focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},ue={class:"w-96 text-center"},me=i(()=>t("label",{for:"updatedOn",class:"block"},"Updated On",-1)),pe={id:"updatedOn",rows:"1",disabled:"",class:"itbkk-updated-on text-center p-2 mt-1 text-[#BFF1FF] focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},ge={class:"my-4 flex"},be={class:"w-[39em]"},fe=i(()=>t("label",{for:"description",class:"block"},"Description",-1)),ve={class:"flex justify-end gap-2 mr-4"},xe=["disabled"],ke=i(()=>t("button",{class:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded w-24"}," Cancel ",-1)),_e={__name:"EditTask",setup(m){const n=N(),y=U(),b=V().getStatuses(),F=C(),f=L(),S=async()=>{try{const o=await w("/nw1/api//v2/statuses");b.value=o}catch(o){console.error("Failed to fetch status:",o)}},e=k({id:"",title:"",description:"",assignees:"",status:"",createdOn:"",updatedOn:""}),c=k(null),T=async o=>{try{const s=await w(`/nw1/api//v2/tasks/${o}`);s?(e.value=s,c.value={...s}):console.warn(`Task with ID ${o} not found.`)}catch(s){console.error(`Failed to fetch task with ID ${o}:`,s)}};A(()=>{const o=F.params.id;T(o),S()});const O=async()=>{try{e.value.status||(e.value.status="No Status");const o=await q(`/nw1/api//v2/tasks/${e.value.id}`,e.value);y.editTask(o),n.setNotificationMessage(`The task "${e.value.title}" has been updated`),n.setNotificationType("success"),n.setShowNotification(!0),e.value={id:"",title:"",description:"",assignees:"",status:"",createdOn:"",updatedOn:""},f.push({name:"TaskList"})}catch(o){n.setNotificationMessage(`An error occurred updating the task "${e.value.title}"`),n.setNotificationType("error"),n.setShowNotification(!0),console.error("Error saving task:",o),f.push({name:"TaskList"})}},v=Intl.DateTimeFormat().resolvedOptions().timeZone,x=o=>{const s=new Date(o),g=s.toLocaleDateString("en-GB"),a=s.toLocaleTimeString("en-GB",{timeZone:`${v}`});return`${g} ${a}`},B=_(()=>x(e.value.createdOn)),D=_(()=>x(e.value.updatedOn)),$=()=>{var o;return e.value.title!==((o=c.value)==null?void 0:o.title)||e.value.description!==c.value.description||e.value.assignees!==c.value.assignees||e.value.status!==c.value.status};return(o,s)=>{const g=M("RouterLink");return d(),r("div",H,[t("div",J,[t("div",K,[t("form",Q,[t("div",W,[X,l(t("textarea",{id:"title",maxlength:"100","onUpdate:modelValue":s[0]||(s[0]=a=>e.value.title=a),class:"itbkk-title p-2 mt-1 hide text-[#BFF1FF] focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},null,512),[[u,e.value.title,void 0,{trim:!0}]])]),t("div",Y,[ee,e.value.assignees?l((d(),r("textarea",{key:1,id:"assignees",maxlength:"30","onUpdate:modelValue":s[2]||(s[2]=a=>e.value.assignees=a),class:"itbkk-assignees p-2 mt-2 text-[#BFF1FF] focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},null,512)),[[u,e.value.assignees,void 0,{trim:!0}]]):l((d(),r("textarea",{key:0,id:"assignees","onUpdate:modelValue":s[1]||(s[1]=a=>e.value.assignees=a),class:"itbkk-assignees text-gray-500 italic p-2 mt-2 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},"Unassigned",512)),[[u,e.value.assignees,void 0,{trim:!0}]])]),t("div",te,[se,l(t("select",{id:"status","onUpdate:modelValue":s[3]||(s[3]=a=>e.value.status=a),required:"",class:"itbkk-status text-xl bg-[#151515] font-semi bold h-[60.8px] p-2 mt-1 text-[#BFF1FF] focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm border-[3px] border-gray-300 rounded-md"},[oe,(d(!0),r(E,null,R(h(b),a=>(d(),r("option",{value:a,key:a.id},p(a.name),9,ae))),128))],512),[[z,e.value.status]])]),t("div",ie,[de,t("textarea",re,p(h(v)),1)]),t("div",ne,[le,t("textarea",ce,p(B.value),1)]),t("div",ue,[me,t("textarea",pe,p(D.value),1)])]),t("form",ge,[t("div",be,[fe,e.value.description?l((d(),r("textarea",{key:1,"onUpdate:modelValue":s[5]||(s[5]=a=>e.value.description=a),id:"description",maxlength:"500",rows:"5",class:"itbkk-description p-2 mt-1 text-[#BFF1FF] focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},null,512)),[[u,e.value.description,void 0,{trim:!0}]]):l((d(),r("textarea",{key:0,id:"description",maxlength:"500",rows:"5","onUpdate:modelValue":s[4]||(s[4]=a=>e.value.description=a),class:"itbkk-description text-gray-500 italic p-2 mt-2 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-[3px] border-gray-300 rounded-md"},"No Description Provided",512)),[[u,e.value.description,void 0,{trim:!0}]])])])]),t("div",ve,[t("button",{onClick:O,disabled:!$(),class:"bg-[#4CAF50] hover:bg-[#43A047] text-white py-2 px-4 rounded-lg shadow disabled:bg-gray-500 disabled:text-gray-300 disabled:cursor-not-allowed"},"Save",8,xe),Z(g,{to:"/task"},{default:j(()=>[ke]),_:1})])])])}}},ye=I(_e,[["__scopeId","data-v-91a3fe06"]]);export{ye as default};
